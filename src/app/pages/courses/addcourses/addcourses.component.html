<!-- <p>addcourses works!</p> -->
<div class="page-content">
  <div *ngIf="currentPages === 1">
    <div>
      <h3>Course List</h3>
    </div>

    <div class="container-fluid scroll-x">
          <!-- Button Group -->
          <div class="scroll-x">
            <div class="table table-responsive table-wrapper">
              <table class="table border_none">
                <tr>
                    <th>
                        <button class="btn btn-outline-dark" (click)="setPage(2)"><i class="bi bi-plus"></i>&nbsp;&nbsp;New</button>
                        <!-- <button class="btn btn-outline-dark" (click)="setPage(3)"  [disabled]="!selectedCourseId"><i class="bi bi-pencil"></i>&nbsp;&nbsp;Edit</button> -->
                        <button class="btn btn-outline-dark"
                        (click)="loadCourseForEdit()"
                        [disabled]="!selectedCourseId">
                  <i class="bi bi-pencil"></i>&nbsp;&nbsp;Edit
                </button>

                    <button type="button"class="btn btn-outline-danger"  [disabled]="!selectedCourseId" (click)="confirmDeleteCourse()"><i class="bi bi-trash"></i>&nbsp;&nbsp;Delete Selected Course</button>




                  </th>
                </tr>
              </table>
            </div>
          </div>

        <!-- Scrollable Table -->
        <div class="scroll-x">
          <div class="table-wrapper">
            <table class="table table-bordered table-hover table-sm">
              <thead>
                <tr>
                    <th>
                        <input type="checkbox" (change)="toggleAllCheckboxes($event)" [checked]="isAllSelected()"/>

                    </th>

                    <th>CourseId</th>
                  <th>UserId</th>
                  <th>Name</th>
                  <th>Department</th>
                  <th>Description</th>
                  <th>Video Link</th>
                  <th>Title</th>
                  <th>Role</th>
                  <th>Created Date</th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let course of paginatedRows">
                  <td>
                    <input type="radio" name="selectedCourse"
                           [value]="course.id"
                           [(ngModel)]="selectedCourseId" />
                  </td>
                  <td>{{ course.courseId }}</td>
                  <td>{{ course.userId }}</td>
                  <td>{{ course.name }}</td>
                  <td>{{ course.department }}</td>
                  <td>{{ course.description }}</td>
                  <td><a [href]="course.videoLink" target="_blank">{{course.title}}</a></td>
                  <td>{{ course.title }}</td>
                  <td>{{ course.role }}</td>
                  <td>{{ course.createdDate | date:'short' }}</td>>
                </tr>

              </tbody>

            </table>
          </div>
        </div>

         <!-- Pagination -->
        <nav>
        <ul class="pagination pagination-sm ">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <a class="page-link" href="#" (click)="previousPage(); $event.preventDefault()">«</a>
          </li>
          <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index" [class.active]="currentPage === i + 1">
            <a class="page-link" href="#" (click)="goToPage(i + 1); $event.preventDefault()">{{ i + 1 }}</a>
          </li>
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <a class="page-link" href="#" (click)="nextPage(); $event.preventDefault()">»</a>
          </li>
        </ul>
        <p class="text-center text-muted small">
          Page {{ currentPage }} of {{ totalPages }} ({{ tableRows.length }} items)
        </p>
      </nav>
    </div>
  </div>

  <div *ngIf="currentPages === 2">
    <!-- <h2>Courses</h2> -->

    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2>Courses</h2>
      <button class="btn btn-secondary" (click)="goBack()">Back</button>
    </div>
    <div class="dashboard-form">
      <h5><strong>Create New Course</strong></h5>

      <form [formGroup]="courseForm" (ngSubmit)="onSubmit()">

          <div class="row g-3">
            <!-- Role -->

            <div class="col-md-6">
              <label class="form-label">User Role: <span class="text-danger">*</span></label>
              <select formControlName="Role"  class="form-control" (change)="onRoleChange(courseForm.get('Role')?.value)">
                <!-- <option value="" disabled selected>Select Role</option> -->
                <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
              </select>
            </div>
          <!-- UserId Dropdown -->

          <div class="col-md-6">
            <label class="form-label">User ID: <span class="text-danger">*</span></label>
            <select formControlName="UserId"  class="form-control">
              <!-- <option value="">-- Select User ID --</option> -->
              <option *ngFor="let user of userList" [value]="user.userId">{{ user.userId }}</option>
            </select>
          </div>

          <!-- Name Field (Auto Displayed) -->

           <div class="col-md-6">
          <label class="form-label">Name:</label>
          <input type="text" class="form-control" formControlName="Name"  [readonly]="true" />
        </div>

          <!-- Course Title -->
          <div class="col-md-6">
            <label class="form-label">Video Title:</label>
            <input type="text" formControlName="Title"  class="form-control" placeholder="Enter Video Title">
          </div>

          <!-- Video Link -->
          <div class="col-md-6">
            <label class="form-label">Video Link:</label>
            <input type="text" formControlName="VideoLink"  class="form-control" placeholder="Enter Video Link">
          </div>

          <!-- Department -->

          <div class="form-group col-md-6" style="position: relative;">
            <label class="form-label">Department:</label>
            <select formControlName="Department"  class="form-control form-control-sm">
              <option *ngFor="let dept of departmentList" [value]="dept">{{ dept }}</option>
            </select>
          </div>

          <!-- Description -->
          <div class="col-md-12">
            <label class="form-label">Description:</label>
            <textarea formControlName="Description"  class="form-control" rows="3"></textarea>
          </div>

          <!-- Buttons -->
          <div class="col-md-12 d-flex align-items-end">
            <button type="button" class="btn btn-danger me-2" (click)="courseForm.reset()">Clear</button>
            <!-- <button type="submit" class="btn btn-success">Save</button> -->
            <button type="submit" class="btn btn-success" [disabled]="courseForm.invalid">Save</button>

          </div>
        </div>
      </form>
    </div>
  </div>

  <div *ngIf="currentPages === 3">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2>Edit Course</h2>
      <button class="btn btn-secondary" (click)="goBack()">Back</button>
    </div>

    <!-- <form [formGroup]="courseForm"> -->
      <form [formGroup]="courseForm" (ngSubmit)="updateCourse()">

      <div class="row g-3">



        <div class="col-md-6">
          <label class="form-label">CourseId:</label>
          <input type="text" formControlName="CourseId" class="form-control" id="CourseId" [readonly]="true" />
        </div>

        <!-- Title -->
        <div class="col-md-6">
          <label class="form-label">Video Title:</label>
          <input type="text" formControlName="Title" id="Title" class="form-control" placeholder="Enter Video Title" />
        </div>

        <!-- Video Link -->
        <div class="col-md-6">
          <label class="form-label">Video Link:</label>
          <input type="text" formControlName="VideoLink"id="VideoLink" class="form-control" placeholder="Enter Video Link" />
        </div>

        <!-- Department -->
        <!-- <div class="col-md-6">
          <label class="form-label">Department:</label>
          <input type="text" formControlName="Department" class="form-control" placeholder="Enter Department" />
        </div> -->

        <div class="form-group col-md-6" style="position: relative;">
          <label class="form-label">Department:</label>
          <select formControlName="Department" id="Department" class="form-control form-control-sm">
            <option *ngFor="let dept of departmentList" [value]="dept">{{ dept }}</option>
          </select>
        </div>

        <!-- Description -->
        <div class="col-md-12">
          <label class="form-label">Description:</label>
          <textarea formControlName="Description" class="form-control" rows="3"></textarea>
        </div>

        <!-- Buttons -->
        <div class="col-md-12 d-flex align-items-end">
          <button type="button" class="btn btn-danger me-2" (click)="courseForm.reset()">Clear</button>
          <button type="submit" class="btn btn-primary" >Update</button>

        </div>
      </div>
    </form>
  </div>

